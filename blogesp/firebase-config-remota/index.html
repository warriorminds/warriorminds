<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Configuración Remota con Firebase &#8211; Warrior Minds</title>
<meta name="description" content="La configurción remota de Firebase permite cambiar algunos aspectos de tu aplicación sin tener que publicar una nueva versión de tu app.">
<meta name="keywords" content="firebase, android, configuracion remota">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Configuración Remota con Firebase">
<meta name="twitter:description" content="La configurción remota de Firebase permite cambiar algunos aspectos de tu aplicación sin tener que publicar una nueva versión de tu app.">
<meta name="twitter:site" content="@warrior_minds">
<meta name="twitter:creator" content="@warrior_minds">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://warriorminds.github.io//images/site-logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="es_MX">
<meta property="og:type" content="article">
<meta property="og:title" content="Configuración Remota con Firebase">
<meta property="og:description" content="La configurción remota de Firebase permite cambiar algunos aspectos de tu aplicación sin tener que publicar una nueva versión de tu app.">
<meta property="og:url" content="https://warriorminds.github.io//blogesp/firebase-config-remota/">
<meta property="og:site_name" content="Warrior Minds">

<!-- Webmaster Tools verfication -->
<meta name="google-site-verification" content="zWZJBibG8K_1P8JoyAvMcsxBjzkx7tOIVm6knil7Ke8">
<meta name="msvalidate.01" content="BDA9831FA00B2435A6575FB4641D8066">


<link rel="canonical" href="https://warriorminds.github.io//blogesp/firebase-config-remota/">
<link href="https://warriorminds.github.io//feed.xml" type="application/atom+xml" rel="alternate" title="Warrior Minds Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="https://warriorminds.github.io//assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="https://warriorminds.github.io//assets/js/vendor/html5shiv.min.js"></script>
  <script src="https://warriorminds.github.io//assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="https://warriorminds.github.io//assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://warriorminds.github.io//favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://warriorminds.github.io//favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://warriorminds.github.io//images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://warriorminds.github.io//images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://warriorminds.github.io//images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://warriorminds.github.io//images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="https://warriorminds.github.io//" >Inicio</a></li>
		  
		    
		    <li><a href="https://warriorminds.github.io//blog/es/" >Blog</a></li>
		  
		    
		    <li><a href="https://warriorminds.github.io//categories/" >Categorias</a></li>
		  
		    
		    <li><a href="https://warriorminds.github.io//search/" >Buscar</a></li>
		  
		    
		    <li><a href="https://warriorminds.github.io//about/" >Acerca de</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="https://warriorminds.github.io//" class="site-logo" rel="home" title="Warrior Minds"><img src="https://warriorminds.github.io//images/site-logo.png" width="200" height="200" alt="Warrior Minds logo" class="animated fadeInDown"></a>
      
      <h1 class="site-title animated fadeIn"><a href="https://warriorminds.github.io//">Warrior Minds</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">Entrena tu mente en las artes del Software.</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<!-- Begin MailChimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
	/* Add your own MailChimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="//github.us14.list-manage.com/subscribe/post?u=b7c3d4083b8b3456c5927056f&amp;id=b18df401fa" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<label for="mce-EMAIL">Suscríbete a Warrior Minds</label>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="correo electrónico" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_b7c3d4083b8b3456c5927056f_b18df401fa" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Suscríbete" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup-->

<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <ul class="entry-tags">
          <li><a href="https://warriorminds.github.io//tags/#firebase" title="Pages tagged firebase">firebase</a></li><li><a href="https://warriorminds.github.io//tags/#android" title="Pages tagged android">android</a></li><li><a href="https://warriorminds.github.io//tags/#configuracion remota" title="Pages tagged configuracion remota">configuracion remota</a></li>
        </ul>
        
          <h1 class="entry-title">Configuración Remota con Firebase</h1>
        
      </header>
      <footer class="entry-meta">
        
        
          <img src="https://warriorminds.github.io//images/bio-photo.png" class="bio-photo" alt="Warrior Minds bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Warrior Minds</span></span>
        
        <span class="entry-date date published"><time datetime="2017-01-23T11:25:55-06:00"><i class="fa fa-calendar-o"></i> January 23, 2017</time></span>
        
        
        <span class="entry-comments"><i class="fa fa-comment-o"></i> <a href="#disqus_thread">Comment</a></span>
        <span class="social-share-twitter">
  <a href="https://twitter.com/intent/tweet?hashtags=firebase,android,configuracionremota&amp;text=Configuración%20Remota%20con%20Firebase&amp;url=https://warriorminds.github.io//blogesp/firebase-config-remota/&amp;via=warrior_minds" title="Share on Twitter" itemprop="Twitter"><i class="fa fa-twitter-square"></i> Tweet</a>
</span>
<span class="social-share-facebook">
  <a href="https://www.facebook.com/sharer/sharer.php?u=https://warriorminds.github.io//blogesp/firebase-config-remota/" title="Share on Facebook" itemprop="Facebook"><i class="fa fa-facebook-square"></i> Like</a>
</span>
<span class="social-share-googleplus">
  <a href="https://plus.google.com/share?url=https://warriorminds.github.io//blogesp/firebase-config-remota/" title="Share on Google Plus" itemprop="GooglePlus"><i class="fa fa-google-plus-square"></i> +1</a>
</span>
<!-- /.social-share -->
        <div class="google-ads" style="margin-top:40px; text-align:center;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- 160x600 ad -->
  <ins class="adsbygoogle"
       style="display:inline-block;width:160px;height:600px"
       data-ad-client="ca-pub-8872211495609343"
       data-ad-slot="4963587312"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div><!-- /.google-ads --><!-- /.google-ads -->
      </footer>
      <div class="entry-content">
        <p>Toda la información oficial de Firebase la pueden encontrar <a href="https://console.firebase.google.com/" target="_blank">aquí</a>.</p>

<p>El código completo para este Post lo pueden encontrar en <a href="https://github.com/warriorminds/firebase-config-remota" target="_blank">Github</a></p>

<h2 id="introduccin">Introducción</h2>

<p>Hay veces que necesitamos modificar algunos valores de nuestra aplicación sin tener que publicar una nueva versión solamente para eso. O también en algunas ocasiones necesitamos mostrar cierto contenido para algún grupo de usuarios que cumplan con ciertas reglas (por ejemplo, que el dispositivo esté en algún idioma en específico o que se encuentre en algún país, o también que el sistema operativo sea de alguna versión/tipo). Para estos casos Firebase nos proporciona la opción de <em>Configuración Remota</em>.</p>

<p>Configuracion Remota se conforma por un par de elementos:</p>

<ul>
  <li>Una lista de <em>parámetros</em>, de la forma Llave - Valor.</li>
  <li>Una lista de <em>condiciones</em>, las cuales se pueden aplicar a los parametros.</li>
</ul>

<p>En nuestra aplicación podemos hacer uso de estos parámetros. Por defecto, en la aplicación necesitamos definir estos parámetros con un valor inicial. Si obtenemos los valores que definimos en la Configuración Remota de Firebase, la aplicación va a utilizar estos valores en lugar de los predefinidos en la app.</p>

<h2 id="definiendo-parmetros">Definiendo Parámetros</h2>

<p>Vamos a iniciar definiendo algunos parámetros para nuestra aplicación de prueba. Estos parámetros se podrán configurar para mostrar o no un texto, cambiar el color de un texto y definir un texto que se quiera mostrar. En la <a href="https://console.firebase.google.com/" target="_blank">consola de Firebase</a> entramos a nuestra aplicación y seleccionamos la opción de Configuración Remota en el menú. Nos abre una pantalla donde podemos añadir nuestro primer parámetro.</p>

<figure>
    <a href="https://warriorminds.github.io//images/fb/config-remota/00.primer-param.png"><img src="https://warriorminds.github.io//images/fb/config-remota/00.primer-param.png" alt="Creando el primer parámetro de configuración remota." /></a>
</figure>

<p>Al presionar el botón <em>Añade Tu Primer Parámetro</em>, nos aparece un diálogo donde podemos agregar nuestro parámetro. Como llave (o clave, como aparece en Firebase) pondremos la cadena titulo_bienvenida, y como valor podemos poner cualquier texto, en este caso, como se muestra en la imagen, el texto será “Este valor se cambió en la consola”.</p>

<figure>
    <a href="https://warriorminds.github.io//images/fb/config-remota/01.nuevo-param.png"><img src="https://warriorminds.github.io//images/fb/config-remota/01.nuevo-param.png" alt="Agregando el primer parámetro." /></a>
</figure>

<p>Podemos agregar otro parámetro, en este caso lo llamaremos color_subtítulo. A este parámetro lo dejaremos <strong>SIN</strong> valor. Al hacer esto, la aplicación <em>utilizará el valor para este parámetro definido dentro de la app</em>.</p>

<figure>
    <a href="https://warriorminds.github.io//images/fb/config-remota/02.param-sin-valor.png"><img src="https://warriorminds.github.io//images/fb/config-remota/02.param-sin-valor.png" alt="Agregando un parámetro sin valor." /></a>
</figure>

<h2 id="agregando-condiciones">Agregando Condiciones</h2>

<p>Al momento de definir un parámtro, también se nos da la opción de definir una <em>condición</em> para este parámetro. Una condición nos permite agregar ciertas reglas que se deben de cumplir, para que el valor del parámetro se utilice. Para agregar una nueva condición, en el diálogo donde se define el parámetro, necesitamos presionar el texto <em>Añadir valor de condición</em>. Al hacer esto, aparecerá otro diálogo donde podemos definir la condición o agregar alguna condición existente.</p>

<figure>
    <a href="https://warriorminds.github.io//images/fb/config-remota/03.param-condicion-nueva.png"><img src="https://warriorminds.github.io//images/fb/config-remota/03.param-condicion-nueva.png" alt="Agregando una condición al parámetro." /></a>
</figure>

<p>Si queremos definir una condición nueva, se abrirá un nuevo diálogo donde podremos definir la condición. Podemos asignarle un nombre, un color para identificarla, y podemos agregar varias reglas que se deben de cumplir para que el valor del parámetro se utilice.</p>

<figure>
    <a href="https://warriorminds.github.io//images/fb/config-remota/04.condiciones.png"><img src="https://warriorminds.github.io//images/fb/config-remota/04.condiciones.png" alt="Condición nueva." /></a>
</figure>

<p>Vamos a crear una condición. Esta condición se aplicará cuando el Sistema Operativo del dispositivo sea Android, el país sea México y el idioma del dispositivo sea Inglés.</p>

<figure>
    <a href="https://warriorminds.github.io//images/fb/config-remota/05.creando-condicion.png"><img src="https://warriorminds.github.io//images/fb/config-remota/05.creando-condicion.png" alt="Creando una condición." /></a>
</figure>

<p>Al crear la condición la podemos agregar a nuestro parámetro. Si se cumple esta condición, podemos asignarle un valor. En nuestro caso, a nuestra condición anterior que llamamos Inglés-Android-Mexico, si se cumple, tendremos el valor <em>El dispositivo está en inglés, es Android y está en México</em>. En caso de que la condición no se cumpla, vamos a mostrar el valor <em>El texto a mostrar por default</em>.</p>

<figure>
    <a href="https://warriorminds.github.io//images/fb/config-remota/06.usando-condicion.png"><img src="https://warriorminds.github.io//images/fb/config-remota/06.usando-condicion.png" alt="Valores del parámetro con la condición." /></a>
</figure>

<p>Podemos agregar varias condiciones. Habrá veces en que varias condiciones se puedan cumplir. Sin embargo, el valor que se utilizará será el primer valor donde la condición se cumpla, de arriba hacia abajo.</p>

<p>Al terminar de añaidr parámetros con sus valores y condiciones, estos cambios no serán publicados inmediatamente. Aparecerá la pantalla con la lista de tus parámetros y valores/condiciones y necesitamos presionar el botón de <em>Aplicar Cambios</em> en la parte superior de la pantalla para que los parámetros estén disponibles para nuestra aplicación.</p>

<figure>
    <a href="https://warriorminds.github.io//images/fb/config-remota/07.publicar-cambios.png"><img src="https://warriorminds.github.io//images/fb/config-remota/07.publicar-cambios.png" alt="Publicar los cambios de configuración remota." /></a>
</figure>

<p>En la sección de Configuración Remota en la consola, también podemos tener acceso a la lista de condiciones que tenemos definidas, las cuales podemos editar, así cómo la opción para crear una condición nueva. Para acceder a esta lista, debemos presionar la pestaña de <em>Condiciones</em>.</p>

<figure>
    <a href="https://warriorminds.github.io//images/fb/config-remota/08.condiciones-editar.png"><img src="https://warriorminds.github.io//images/fb/config-remota/08.condiciones-editar.png" alt="Lista de condiciones." /></a>
</figure>

<h2 id="agregando-configuracin-remota">Agregando Configuración Remota</h2>

<p>Para comenzar a utilizar la Configuración Remota de Firebase, necesitamos seguir los pasos de este <a href="https://warriorminds.github.io//blogesp/firebase-intro" target="_blank">Post</a>. Posteriormente, necesitamos agregar la dependencia en el <a href="https://github.com/warriorminds/firebase-config-remota/blob/master/app/build.gradle" target="_blank">gradle de la aplicación</a>.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">firebase</span><span class="o">:</span><span class="n">firebase</span><span class="o">-</span><span class="nl">config:</span><span class="mf">10.0</span><span class="o">.</span><span class="mi">1</span><span class="err">'</span>
</code></pre>
</div>

<h2 id="utilizando-configuracin-remota">Utilizando Configuración Remota</h2>

<p>Firebase nos proporciona un objeto <em>FirebaseRemoteConfig</em> para poder utilizar la Configuración Remota. Necesitamos crear una variable de este tipo para posteriormente asignarle la instancia correspondiente y poder comenzar a utilizarlo.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">private</span> <span class="n">FirebaseRemoteConfig</span> <span class="n">configuracionRemota</span><span class="o">;</span>
<span class="n">configuracionRemota</span> <span class="o">=</span> <span class="n">FirebaseRemoteConfig</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
</code></pre>
</div>

<p>Para que la Configuración Remota funcione, necesitamos crear un <em>archivo xml</em> con los valores predeterminados de nuestros parámetros. Estos valores se utilizarán cuando no haya algún parámetro en la consola de Firebase con el mismo nombre, o cuándo el parámetro no tenga un valor definido en la consola.</p>

<p>Crearemos el archivo valores_config_remota.xml donde debemos de crear una estructura como se muestra a continuación.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">defaultsMap</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">entry</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">entry</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">defaultsMap</span><span class="o">&gt;</span>
</code></pre>
</div>

<p>Llenando el archivo con los parámetros que definimos en la consola previamente, pero con el valor por defecto, nuestro archivo quedaría de la siguiente manera</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">defaultsMap</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">entry</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">titulo_bienvenida</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">Aplicaci</span><span class="err">ó</span><span class="n">n</span> <span class="n">de</span> <span class="n">configuraci</span><span class="err">ó</span><span class="n">n</span> <span class="n">remota</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">entry</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">entry</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">mostrar_subtitulo</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="kc">true</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">entry</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">entry</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">color_subtitulo</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="err">#</span><span class="mi">000000</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">entry</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">entry</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">texto_mostrar</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">Este</span> <span class="n">es</span> <span class="n">el</span> <span class="n">texto</span> <span class="n">a</span> <span class="n">mostrar</span> <span class="n">por</span> <span class="n">defecto</span> <span class="n">en</span> <span class="n">la</span> <span class="n">aplicaci</span><span class="err">ó</span><span class="n">n</span><span class="o">.&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">entry</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">defaultsMap</span><span class="o">&gt;</span>
</code></pre>
</div>

<p>Para que nuestra aplicación cargue los valores por defecto que definimos en nuestro archivo xml, necesitamos utilizar el método <em>setDefaults()</em> indicándole el archivo donde vendrán nuestros valores.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">configuracionRemota</span><span class="o">.</span><span class="na">setDefaults</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">valores_config_remota</span><span class="o">);</span>
</code></pre>
</div>

<p>Una vez que se cargaron los valores por defecto, podemos obtenerlos del objeto FirebaseRemoteConfig y comenzar a utilizarlos.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">mostrarValores</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">titulo</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">configuracionRemota</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">TITULO</span><span class="o">));</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">configuracionRemota</span><span class="o">.</span><span class="na">getBoolean</span><span class="o">(</span><span class="n">MOSTRAR_SUBTITULO</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">subtitulo</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">VISIBLE</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">subtitulo</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">GONE</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="n">subtitulo</span><span class="o">.</span><span class="na">setTextColor</span><span class="o">(</span><span class="n">Color</span><span class="o">.</span><span class="na">parseColor</span><span class="o">(</span><span class="n">configuracionRemota</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">COLOR_SUBTITULO</span><span class="o">)));</span>
    <span class="n">colorSubtitulo</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">"El color del subtitulo es "</span> <span class="o">+</span> <span class="n">configuracionRemota</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">COLOR_SUBTITULO</span><span class="o">));</span>
    <span class="n">texto</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">configuracionRemota</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">TEXTO</span><span class="o">));</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Para obtener los valores de Configuración Remota que están en Firebase, vamos a crear un botón para que cuando lo presionemos, obtenga estos valores.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">botonConfigRemota</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">obtenerConfiguracionRemota</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre>
</div>

<p>Firebase permite hacer solamente <strong>5</strong> peticiones por hora. Si están en modo de desarrollador van a necesitar más de 5 para hacer sus pruebas. Firebase nos permite configurar el objeto FirebaseRemoteConfig en modo <em>Debug</em> para poder obtener más peticiones.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">FirebaseRemoteConfigSettings</span> <span class="n">opcionesConfiguracionRemota</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FirebaseRemoteConfigSettings</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">setDeveloperModeEnabled</span><span class="o">(</span><span class="n">BuildConfig</span><span class="o">.</span><span class="na">DEBUG</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">configuracionRemota</span><span class="o">.</span><span class="na">setConfigSettings</span><span class="o">(</span><span class="n">opcionesConfiguracionRemota</span><span class="o">);</span>
</code></pre>
</div>

<p>Con esto estamos listos para obtener nuestra configuración. Podemos agregarle un tiempo de expiración de los datos (que en el caso de ser desarrolladores y estar en modo Debug, podrá ser de 0 para cada vez que pidamos la configuración, nos traiga los últimos valores, con la finalidad de probar el código).</p>

<p>Utilizamos el método <em>fetch()</em> del objeto FirebaseRemoteConfig para obtener los datos. Una vez obtenidos, necesitamos <em>activarlos</em> para que puedan ser utilizados. Una vez obtenidos y activados los valores, podemos actualizar los TextViews con los nuevos valores:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">obtenerConfiguracionRemota</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">long</span> <span class="n">tiempoExpiracionDatos</span> <span class="o">=</span> <span class="mi">3600</span><span class="o">;</span> <span class="c1">// en segundos.</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">configuracionRemota</span><span class="o">.</span><span class="na">getInfo</span><span class="o">().</span><span class="na">getConfigSettings</span><span class="o">().</span><span class="na">isDeveloperModeEnabled</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">tiempoExpiracionDatos</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="n">configuracionRemota</span><span class="o">.</span><span class="na">fetch</span><span class="o">(</span><span class="n">tiempoExpiracionDatos</span><span class="o">).</span><span class="na">addOnCompleteListener</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="k">new</span> <span class="n">OnCompleteListener</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onComplete</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="n">Task</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="n">tarea</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">tarea</span><span class="o">.</span><span class="na">isSuccessful</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">configuracionRemota</span><span class="o">.</span><span class="na">activateFetched</span><span class="o">();</span>
            <span class="o">}</span>
            <span class="n">mostrarValores</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Podemos ver los valores defecto, <em>ANTES</em> de sincronizar con Firebase.</p>

<figure>
    <a href="https://warriorminds.github.io//images/fb/config-remota/09.valores-default.png"><img src="https://warriorminds.github.io//images/fb/config-remota/09.valores-default.png" alt="Valores por defecto." /></a>
</figure>

<p>Al presionar el botón, obtenemos la configuración remota.</p>

<figure>
    <a href="https://warriorminds.github.io//images/fb/config-remota/10.valores-config-remota.png"><img src="https://warriorminds.github.io//images/fb/config-remota/10.valores-config-remota.png" alt="Valores de configuración remota." /></a>
</figure>

<h2 id="conclusin">Conclusión</h2>

<p>La Configuración Remota de Firebase nos permite almacenar parámetros con la forma llave-valor, los cuales nos permiten cambiar algunos aspectos de nuestra aplicación sin tener que sacar una nueva versión. Para que esto funcione, necesitamos agregar los parámetros en la consola, agregar condiciones si es necesario para posteriormente obtener los parámetros dentro de la aplicación. En la aplicación, necesitamos un archivo con los valores por defecto de los parámetros. Para sincronizar con Firebase, necesitamos obtener los parámetros y posteriormente activarlos.</p>

<p>Las condiciones funcionarán de la siguiente manera: se pueden agregar varias condiciones, pero la primera condición que sea verdadera, será la que se utilice.</p>

<p>En caso de no tener parámetros con esa llave, o el parámetro en Firebase no tiene un valor, se utilizará el valor del archivo xml dentro de la aplicación. De igual manera se utilizarán los valores de ese archivo cuando no se haga la activación de los parámetros, una vez obtenidos.</p>

<p>Si hay parámetros con valor y se activaron, y cumplen con las condiciones (en caso de que existan), se utilizarán los valores de la consola de Firebase.</p>


        
          <div id="disqus_thread"></div><!-- /#disqus_thread -->
          
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'warriormindswebsite'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="https://warriorminds.github.io//blogesp/firebase-notifications/" class="btn" title="Notificaciones con Firebase">Anterior</a>
      
      
        <a href="https://warriorminds.github.io//blogesp/firebase-db-reglas/" class="btn" title="Base de Datos en Tiempo Real con Firebase">Siguiente</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    <div class="google-ads" style="margin:10px 0;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <!-- 320x50 ad -->
  <ins class="adsbygoogle"
       style="display:inline-block;width:320px;height:50px"
       data-ad-client="ca-pub-8872211495609343"
       data-ad-slot="9595923317"></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div><!-- /.google-ads -->

<span>&copy; 2018 Warrior Minds. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/so-simple-jekyll-theme/" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="https://twitter.com/warrior_minds" title="Warrior Minds on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	<a href="https://facebook.com/warriorminds" title="Warrior Minds on Facebook" target="_blank"><i class="fa fa-facebook-square fa-2x"></i></a>
	<a href="https://plus.google.com/102230749926196780961" title="Warrior Minds on Google+" target="_blank"><i class="fa fa-google-plus-square fa-2x"></i></a>
	
	
	
	
	<a href="https://github.com/warriorminds" title="Warrior Minds on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
	<a href="https://www.youtube.com/channel/UCHGyNJUbgk39Q4UhlVX6ucA" title="Warrior Minds on Youtube" target="_blank"><i class="fa fa-youtube-square fa-2x"></i></a>
  <a href="https://warriorminds.github.io//feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'https://warriorminds.github.io/';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://warriorminds.github.io//assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://warriorminds.github.io//assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 'https://www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-65168700-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = 'https://stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



</body>
</html>
