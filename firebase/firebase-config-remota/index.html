<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.3 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="es" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Configuración Remota con Firebase - Rodrigo Guerrero</title>
<meta name="description" content="La configurción remota de Firebase permite cambiar algunos aspectos de tu aplicación sin tener que publicar una nueva versión de tu app.">



<meta property="og:type" content="article">
<meta property="og:locale" content="es">
<meta property="og:site_name" content="Rodrigo Guerrero">
<meta property="og:title" content="Configuración Remota con Firebase">
<meta property="og:url" content="http://rodrigoguerrero.com/firebase/firebase-config-remota/">


  <meta property="og:description" content="La configurción remota de Firebase permite cambiar algunos aspectos de tu aplicación sin tener que publicar una nueva versión de tu app.">



  <meta property="og:image" content="http://rodrigoguerrero.com/assets/images/android-generic.jpg">



  <meta name="twitter:site" content="@warrior_minds">
  <meta name="twitter:title" content="Configuración Remota con Firebase">
  <meta name="twitter:description" content="La configurción remota de Firebase permite cambiar algunos aspectos de tu aplicación sin tener que publicar una nueva versión de tu app.">
  <meta name="twitter:url" content="http://rodrigoguerrero.com/firebase/firebase-config-remota/">

  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="http://rodrigoguerrero.com/assets/images/android-generic.jpg">
  

  



  <meta property="article:published_time" content="2017-01-23T17:25:55+00:00">





  

  


<link rel="canonical" href="http://rodrigoguerrero.com/firebase/firebase-config-remota/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "http://rodrigoguerrero.com/"
    
  }
</script>


  <meta name="google-site-verification" content="zWZJBibG8K_1P8JoyAvMcsxBjzkx7tOIVm6knil7Ke8" />


  <meta name="msvalidate.01" content="BDA9831FA00B2435A6575FB4641D8066">




<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Rodrigo Guerrero Feed">

<link rel='icon' href='/assets/images/site-logo.png' type='image/x-icon'/ >
<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Saltar enlaces</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Saltar a navegación principal</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Saltar a contenido</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Saltar a pie</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Rodrigo Guerrero
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://mmistakes.github.io/minimal-mistakes/docs/quick-start-guide/">Acerca de</a>
            </li><li class="masthead__menu-item">
              <a href="/category-archive/">Categorías</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/">Archivo</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Alternar búsqueda</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Alternar menú</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero"
  style=" background-image: url('');"
>
  
    <img src="/assets/images/android-generic.jpg" alt="Configuración Remota con Firebase" class="page__hero-image">
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name"></h3>
    
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Seguir</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Dublin, Ireland</span>
        </li>
      

      
        
          
            <li><a href="mailto:guerrerorodrigom@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
            <li><a href="http://rodrigoguerrero.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
            <li><a href="https://twitter.com/warrior_minds" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
            <li><a href="https://facebook.com/warriorminds" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i><span class="label">Facebook</span></a></li>
          
        
          
            <li><a href="https://github.com/warriorminds" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
        
      

      

      
        <li>
          <a href="mailto:guerrerorodrigom@gmail.com">
            <meta itemprop="email" content="guerrerorodrigom@gmail.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Correo electrónico</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Configuración Remota con Firebase">
    <meta itemprop="description" content="La configurción remota de Firebase permite cambiar algunos aspectos de tu aplicación sin tener que publicar una nueva versión de tu app.">
    <meta itemprop="datePublished" content="2017-01-23T17:25:55+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Configuración Remota con Firebase
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  6 minuto(s) de lectura

</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>Toda la información oficial de Firebase la pueden encontrar <a href="https://console.firebase.google.com/" target="_blank">aquí</a>.</p>

<p>El código completo para este Post lo pueden encontrar en <a href="https://github.com/warriorminds/firebase-config-remota" target="_blank">Github</a></p>

<h2 id="introducción">Introducción</h2>

<p>Hay veces que necesitamos modificar algunos valores de nuestra aplicación sin tener que publicar una nueva versión solamente para eso. O también en algunas ocasiones necesitamos mostrar cierto contenido para algún grupo de usuarios que cumplan con ciertas reglas (por ejemplo, que el dispositivo esté en algún idioma en específico o que se encuentre en algún país, o también que el sistema operativo sea de alguna versión/tipo). Para estos casos Firebase nos proporciona la opción de <em>Configuración Remota</em>.</p>

<p>Configuracion Remota se conforma por un par de elementos:</p>

<ul>
  <li>Una lista de <em>parámetros</em>, de la forma Llave - Valor.</li>
  <li>Una lista de <em>condiciones</em>, las cuales se pueden aplicar a los parametros.</li>
</ul>

<p>En nuestra aplicación podemos hacer uso de estos parámetros. Por defecto, en la aplicación necesitamos definir estos parámetros con un valor inicial. Si obtenemos los valores que definimos en la Configuración Remota de Firebase, la aplicación va a utilizar estos valores en lugar de los predefinidos en la app.</p>

<h2 id="definiendo-parámetros">Definiendo Parámetros</h2>

<p>Vamos a iniciar definiendo algunos parámetros para nuestra aplicación de prueba. Estos parámetros se podrán configurar para mostrar o no un texto, cambiar el color de un texto y definir un texto que se quiera mostrar. En la <a href="https://console.firebase.google.com/" target="_blank">consola de Firebase</a> entramos a nuestra aplicación y seleccionamos la opción de Configuración Remota en el menú. Nos abre una pantalla donde podemos añadir nuestro primer parámetro.</p>

<figure>
    <a href="http://rodrigoguerrero.com/images/fb/config-remota/00.primer-param.png"><img src="http://rodrigoguerrero.com/images/fb/config-remota/00.primer-param.png" alt="Creando el primer parámetro de configuración remota." /></a>
</figure>

<p>Al presionar el botón <em>Añade Tu Primer Parámetro</em>, nos aparece un diálogo donde podemos agregar nuestro parámetro. Como llave (o clave, como aparece en Firebase) pondremos la cadena titulo_bienvenida, y como valor podemos poner cualquier texto, en este caso, como se muestra en la imagen, el texto será “Este valor se cambió en la consola”.</p>

<figure>
    <a href="http://rodrigoguerrero.com/images/fb/config-remota/01.nuevo-param.png"><img src="http://rodrigoguerrero.com/images/fb/config-remota/01.nuevo-param.png" alt="Agregando el primer parámetro." /></a>
</figure>

<p>Podemos agregar otro parámetro, en este caso lo llamaremos color_subtítulo. A este parámetro lo dejaremos <strong>SIN</strong> valor. Al hacer esto, la aplicación <em>utilizará el valor para este parámetro definido dentro de la app</em>.</p>

<figure>
    <a href="http://rodrigoguerrero.com/images/fb/config-remota/02.param-sin-valor.png"><img src="http://rodrigoguerrero.com/images/fb/config-remota/02.param-sin-valor.png" alt="Agregando un parámetro sin valor." /></a>
</figure>

<h2 id="agregando-condiciones">Agregando Condiciones</h2>

<p>Al momento de definir un parámtro, también se nos da la opción de definir una <em>condición</em> para este parámetro. Una condición nos permite agregar ciertas reglas que se deben de cumplir, para que el valor del parámetro se utilice. Para agregar una nueva condición, en el diálogo donde se define el parámetro, necesitamos presionar el texto <em>Añadir valor de condición</em>. Al hacer esto, aparecerá otro diálogo donde podemos definir la condición o agregar alguna condición existente.</p>

<figure>
    <a href="http://rodrigoguerrero.com/images/fb/config-remota/03.param-condicion-nueva.png"><img src="http://rodrigoguerrero.com/images/fb/config-remota/03.param-condicion-nueva.png" alt="Agregando una condición al parámetro." /></a>
</figure>

<p>Si queremos definir una condición nueva, se abrirá un nuevo diálogo donde podremos definir la condición. Podemos asignarle un nombre, un color para identificarla, y podemos agregar varias reglas que se deben de cumplir para que el valor del parámetro se utilice.</p>

<figure>
    <a href="http://rodrigoguerrero.com/images/fb/config-remota/04.condiciones.png"><img src="http://rodrigoguerrero.com/images/fb/config-remota/04.condiciones.png" alt="Condición nueva." /></a>
</figure>

<p>Vamos a crear una condición. Esta condición se aplicará cuando el Sistema Operativo del dispositivo sea Android, el país sea México y el idioma del dispositivo sea Inglés.</p>

<figure>
    <a href="http://rodrigoguerrero.com/images/fb/config-remota/05.creando-condicion.png"><img src="http://rodrigoguerrero.com/images/fb/config-remota/05.creando-condicion.png" alt="Creando una condición." /></a>
</figure>

<p>Al crear la condición la podemos agregar a nuestro parámetro. Si se cumple esta condición, podemos asignarle un valor. En nuestro caso, a nuestra condición anterior que llamamos Inglés-Android-Mexico, si se cumple, tendremos el valor <em>El dispositivo está en inglés, es Android y está en México</em>. En caso de que la condición no se cumpla, vamos a mostrar el valor <em>El texto a mostrar por default</em>.</p>

<figure>
    <a href="http://rodrigoguerrero.com/images/fb/config-remota/06.usando-condicion.png"><img src="http://rodrigoguerrero.com/images/fb/config-remota/06.usando-condicion.png" alt="Valores del parámetro con la condición." /></a>
</figure>

<p>Podemos agregar varias condiciones. Habrá veces en que varias condiciones se puedan cumplir. Sin embargo, el valor que se utilizará será el primer valor donde la condición se cumpla, de arriba hacia abajo.</p>

<p>Al terminar de añaidr parámetros con sus valores y condiciones, estos cambios no serán publicados inmediatamente. Aparecerá la pantalla con la lista de tus parámetros y valores/condiciones y necesitamos presionar el botón de <em>Aplicar Cambios</em> en la parte superior de la pantalla para que los parámetros estén disponibles para nuestra aplicación.</p>

<figure>
    <a href="http://rodrigoguerrero.com/images/fb/config-remota/07.publicar-cambios.png"><img src="http://rodrigoguerrero.com/images/fb/config-remota/07.publicar-cambios.png" alt="Publicar los cambios de configuración remota." /></a>
</figure>

<p>En la sección de Configuración Remota en la consola, también podemos tener acceso a la lista de condiciones que tenemos definidas, las cuales podemos editar, así cómo la opción para crear una condición nueva. Para acceder a esta lista, debemos presionar la pestaña de <em>Condiciones</em>.</p>

<figure>
    <a href="http://rodrigoguerrero.com/images/fb/config-remota/08.condiciones-editar.png"><img src="http://rodrigoguerrero.com/images/fb/config-remota/08.condiciones-editar.png" alt="Lista de condiciones." /></a>
</figure>

<h2 id="agregando-configuración-remota">Agregando Configuración Remota</h2>

<p>Para comenzar a utilizar la Configuración Remota de Firebase, necesitamos seguir los pasos de este <a href="http://rodrigoguerrero.com/blogesp/firebase-intro" target="_blank">Post</a>. Posteriormente, necesitamos agregar la dependencia en el <a href="https://github.com/warriorminds/firebase-config-remota/blob/master/app/build.gradle" target="_blank">gradle de la aplicación</a>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">compile</span> <span class="err">'</span><span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">firebase</span><span class="o">:</span><span class="n">firebase</span><span class="o">-</span><span class="nl">config:</span><span class="mf">10.0</span><span class="o">.</span><span class="mi">1</span><span class="err">'</span>
</code></pre></div></div>

<h2 id="utilizando-configuración-remota">Utilizando Configuración Remota</h2>

<p>Firebase nos proporciona un objeto <em>FirebaseRemoteConfig</em> para poder utilizar la Configuración Remota. Necesitamos crear una variable de este tipo para posteriormente asignarle la instancia correspondiente y poder comenzar a utilizarlo.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">FirebaseRemoteConfig</span> <span class="n">configuracionRemota</span><span class="o">;</span>
<span class="n">configuracionRemota</span> <span class="o">=</span> <span class="nc">FirebaseRemoteConfig</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
</code></pre></div></div>

<p>Para que la Configuración Remota funcione, necesitamos crear un <em>archivo xml</em> con los valores predeterminados de nuestros parámetros. Estos valores se utilizarán cuando no haya algún parámetro en la consola de Firebase con el mismo nombre, o cuándo el parámetro no tenga un valor definido en la consola.</p>

<p>Crearemos el archivo valores_config_remota.xml donde debemos de crear una estructura como se muestra a continuación.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">defaultsMap</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">entry</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">entry</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">defaultsMap</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>Llenando el archivo con los parámetros que definimos en la consola previamente, pero con el valor por defecto, nuestro archivo quedaría de la siguiente manera</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">defaultsMap</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">entry</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">titulo_bienvenida</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="nc">Aplicación</span> <span class="n">de</span> <span class="n">configuración</span> <span class="n">remota</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">entry</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">entry</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">mostrar_subtitulo</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="kc">true</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">entry</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">entry</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">color_subtitulo</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="err">#</span><span class="mo">000000</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">entry</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">entry</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">texto_mostrar</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="nc">Este</span> <span class="n">es</span> <span class="n">el</span> <span class="n">texto</span> <span class="n">a</span> <span class="n">mostrar</span> <span class="n">por</span> <span class="n">defecto</span> <span class="n">en</span> <span class="n">la</span> <span class="n">aplicación</span><span class="o">.&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">entry</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">defaultsMap</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>Para que nuestra aplicación cargue los valores por defecto que definimos en nuestro archivo xml, necesitamos utilizar el método <em>setDefaults()</em> indicándole el archivo donde vendrán nuestros valores.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">configuracionRemota</span><span class="o">.</span><span class="na">setDefaults</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">xml</span><span class="o">.</span><span class="na">valores_config_remota</span><span class="o">);</span>
</code></pre></div></div>

<p>Una vez que se cargaron los valores por defecto, podemos obtenerlos del objeto FirebaseRemoteConfig y comenzar a utilizarlos.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">mostrarValores</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">titulo</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">configuracionRemota</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="no">TITULO</span><span class="o">));</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">configuracionRemota</span><span class="o">.</span><span class="na">getBoolean</span><span class="o">(</span><span class="no">MOSTRAR_SUBTITULO</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">subtitulo</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="nc">View</span><span class="o">.</span><span class="na">VISIBLE</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">subtitulo</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="nc">View</span><span class="o">.</span><span class="na">GONE</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="n">subtitulo</span><span class="o">.</span><span class="na">setTextColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="na">parseColor</span><span class="o">(</span><span class="n">configuracionRemota</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="no">COLOR_SUBTITULO</span><span class="o">)));</span>
    <span class="n">colorSubtitulo</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">"El color del subtitulo es "</span> <span class="o">+</span> <span class="n">configuracionRemota</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="no">COLOR_SUBTITULO</span><span class="o">));</span>
    <span class="n">texto</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">configuracionRemota</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="no">TEXTO</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Para obtener los valores de Configuración Remota que están en Firebase, vamos a crear un botón para que cuando lo presionemos, obtenga estos valores.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">botonConfigRemota</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="nc">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">obtenerConfiguracionRemota</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre></div></div>

<p>Firebase permite hacer solamente <strong>5</strong> peticiones por hora. Si están en modo de desarrollador van a necesitar más de 5 para hacer sus pruebas. Firebase nos permite configurar el objeto FirebaseRemoteConfig en modo <em>Debug</em> para poder obtener más peticiones.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">FirebaseRemoteConfigSettings</span> <span class="n">opcionesConfiguracionRemota</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FirebaseRemoteConfigSettings</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">setDeveloperModeEnabled</span><span class="o">(</span><span class="nc">BuildConfig</span><span class="o">.</span><span class="na">DEBUG</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="n">configuracionRemota</span><span class="o">.</span><span class="na">setConfigSettings</span><span class="o">(</span><span class="n">opcionesConfiguracionRemota</span><span class="o">);</span>
</code></pre></div></div>

<p>Con esto estamos listos para obtener nuestra configuración. Podemos agregarle un tiempo de expiración de los datos (que en el caso de ser desarrolladores y estar en modo Debug, podrá ser de 0 para cada vez que pidamos la configuración, nos traiga los últimos valores, con la finalidad de probar el código).</p>

<p>Utilizamos el método <em>fetch()</em> del objeto FirebaseRemoteConfig para obtener los datos. Una vez obtenidos, necesitamos <em>activarlos</em> para que puedan ser utilizados. Una vez obtenidos y activados los valores, podemos actualizar los TextViews con los nuevos valores:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">obtenerConfiguracionRemota</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">long</span> <span class="n">tiempoExpiracionDatos</span> <span class="o">=</span> <span class="mi">3600</span><span class="o">;</span> <span class="c1">// en segundos.</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">configuracionRemota</span><span class="o">.</span><span class="na">getInfo</span><span class="o">().</span><span class="na">getConfigSettings</span><span class="o">().</span><span class="na">isDeveloperModeEnabled</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">tiempoExpiracionDatos</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="n">configuracionRemota</span><span class="o">.</span><span class="na">fetch</span><span class="o">(</span><span class="n">tiempoExpiracionDatos</span><span class="o">).</span><span class="na">addOnCompleteListener</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="k">new</span> <span class="nc">OnCompleteListener</span><span class="o">&lt;</span><span class="nc">Void</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onComplete</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">Task</span><span class="o">&lt;</span><span class="nc">Void</span><span class="o">&gt;</span> <span class="n">tarea</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">tarea</span><span class="o">.</span><span class="na">isSuccessful</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">configuracionRemota</span><span class="o">.</span><span class="na">activateFetched</span><span class="o">();</span>
            <span class="o">}</span>
            <span class="n">mostrarValores</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Podemos ver los valores defecto, <em>ANTES</em> de sincronizar con Firebase.</p>

<figure>
    <a href="http://rodrigoguerrero.com/images/fb/config-remota/09.valores-default.png"><img src="http://rodrigoguerrero.com/images/fb/config-remota/09.valores-default.png" alt="Valores por defecto." /></a>
</figure>

<p>Al presionar el botón, obtenemos la configuración remota.</p>

<figure>
    <a href="http://rodrigoguerrero.com/images/fb/config-remota/10.valores-config-remota.png"><img src="http://rodrigoguerrero.com/images/fb/config-remota/10.valores-config-remota.png" alt="Valores de configuración remota." /></a>
</figure>

<h2 id="conclusión">Conclusión</h2>

<p>La Configuración Remota de Firebase nos permite almacenar parámetros con la forma llave-valor, los cuales nos permiten cambiar algunos aspectos de nuestra aplicación sin tener que sacar una nueva versión. Para que esto funcione, necesitamos agregar los parámetros en la consola, agregar condiciones si es necesario para posteriormente obtener los parámetros dentro de la aplicación. En la aplicación, necesitamos un archivo con los valores por defecto de los parámetros. Para sincronizar con Firebase, necesitamos obtener los parámetros y posteriormente activarlos.</p>

<p>Las condiciones funcionarán de la siguiente manera: se pueden agregar varias condiciones, pero la primera condición que sea verdadera, será la que se utilice.</p>

<p>En caso de no tener parámetros con esa llave, o el parámetro en Firebase no tiene un valor, se utilizará el valor del archivo xml dentro de la aplicación. De igual manera se utilizarán los valores de ese archivo cuando no se haga la activación de los parámetros, una vez obtenidos.</p>

<p>Si hay parámetros con valor y se activaron, y cumplen con las condiciones (en caso de que existan), se utilizarán los valores de la consola de Firebase.</p>


        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Etiquetas: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#android" class="page__taxonomy-item" rel="tag">android</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#firebase" class="page__taxonomy-item" rel="tag">firebase</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categorías: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#firebase" class="page__taxonomy-item" rel="tag">firebase</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Actualizado:</strong> <time datetime="2017-01-23T17:25:55+00:00">January 23, 2017</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Compartir en</h4>
  

  <a href="https://twitter.com/intent/tweet?via=warrior_minds&text=Configuraci%C3%B3n+Remota+con+Firebase%20http%3A%2F%2Frodrigoguerrero.com%2Ffirebase%2Ffirebase-config-remota%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Compartir en Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Frodrigoguerrero.com%2Ffirebase%2Ffirebase-config-remota%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Compartir en Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Frodrigoguerrero.com%2Ffirebase%2Ffirebase-config-remota%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Compartir en LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/firebase/firebase-notifications/" class="pagination--pager" title="Notificaciones con Firebase
">Anterior</a>
    
    
      <a href="/firebase/firebase-db-reglas/" class="pagination--pager" title="Base de Datos en Tiempo Real con Firebase
">Siguiente</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">Puede que también te interese</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/android-generic.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/android/fundamentos-android-resumen-actividades/" rel="permalink">Fundamentos de Android con Kotlin: Resumen del Módulo Actividades
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  menos de 1 minuto(s) de lectura

</p>
    
    <p class="archive__item-excerpt" itemprop="description">En este video se presenta el resumen del segundo módulo Actividades.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/android-generic.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/android/fundamentos-android-persistencia-datos-actividad-codigo/" rel="permalink">Fundamentos de Android con Kotlin: Programando - Persistencia de Datos en una Actividad
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  menos de 1 minuto(s) de lectura

</p>
    
    <p class="archive__item-excerpt" itemprop="description">En este video se presenta el código para persistir datos dentro de una actividad.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/android-generic.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/android/fundamentos-android-persistencia-datos-actividad/" rel="permalink">Fundamentos de Android con Kotlin: Persistencia de Datos en una Actividad
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  menos de 1 minuto(s) de lectura

</p>
    
    <p class="archive__item-excerpt" itemprop="description">En este video se presenta la forma de persistir datos dentro de una actividad.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/android-generic.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/android/fundamentos-android-ciclo-vida-actividades-codigo/" rel="permalink">Fundamentos de Android con Kotlin: Programando - Actividades - Ciclo de Vida
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  menos de 1 minuto(s) de lectura

</p>
    
    <p class="archive__item-excerpt" itemprop="description">En este video se presenta el código para el ciclo de vida de las actividades.
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Términos de búsqueda...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Términos de búsqueda..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Seguir:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/warrior_minds" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://facebook.com/warriorminds" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
        
      
        
          <li><a href="https://github.com/warriorminds" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Rodrigo Guerrero.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    
  <script>
    var disqus_config = function () {
      this.page.url = "http://rodrigoguerrero.com/firebase/firebase-config-remota/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/firebase/firebase-config-remota"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://rodrigoguerrero.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
